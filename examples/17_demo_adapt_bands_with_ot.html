

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Adapting spectral bands with optimal transport &mdash; rastereasy 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/myst_sphinx_gallery.css?v=92de7a9e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01f34227"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            rastereasy
              <img src="../_static/logo_er.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../rastereasy.html">Rastereasy Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rastereasy.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rastereasy.html#using-and-citing-the-toolbox">Using and citing the toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rastereasy.html#some-interesting-functions">Some interesting functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#resampling-function">Resampling Function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.resampling"><code class="docutils literal notranslate"><span class="pre">resampling()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#projection-function">Projection Function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.reproject"><code class="docutils literal notranslate"><span class="pre">reproject()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#cropping-function">Cropping Function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.crop"><code class="docutils literal notranslate"><span class="pre">crop()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#machine-learning">Machine Learning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.kmeans"><code class="docutils literal notranslate"><span class="pre">kmeans()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.apply_ML_model"><code class="docutils literal notranslate"><span class="pre">apply_ML_model()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#band-manipulation">Band manipulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.stack"><code class="docutils literal notranslate"><span class="pre">stack()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.reorder_bands"><code class="docutils literal notranslate"><span class="pre">reorder_bands()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.remove_bands"><code class="docutils literal notranslate"><span class="pre">remove_bands()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#access-to-numpy">Access to numpy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.numpy_channel_first"><code class="docutils literal notranslate"><span class="pre">numpy_channel_first()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.numpy_channel_last"><code class="docutils literal notranslate"><span class="pre">numpy_channel_last()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.image_from_table"><code class="docutils literal notranslate"><span class="pre">image_from_table()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rastereasy.html#processing-on-images">Processing on images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#rastereasy.Geoimage.adapt"><code class="docutils literal notranslate"><span class="pre">adapt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../rastereasy.html#id0"><code class="docutils literal notranslate"><span class="pre">image_from_table()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rastereasy.html#additional-notes">Additional Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#with-pip">With pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#from-source">From source</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases.html#id1">0.1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code.html">Licence, Code of conduct &amp; source code</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../my_html_gallery.html">Examples of rastereasy use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#data-for-notebooks">Data for notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#quick-start">00 Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#read-and-plot">01 Read And Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#plot-spectral-bands-and-get-pixel-values">02 Plot Spectral Bands And Get Pixel Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#crop-image">03 Crop Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#reprojection">04 Reprojection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#resample">05 Resample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#deal-with-numpy-arrays">06 Deal With Numpy Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#save-images">07 Save Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#standardization-of-bands">08 Standardization Of Bands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#select-bands">09 Select Bands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#pixel-vs-geo-coord">10 Pixel Vs Geo Coord</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#demo-add-bands">11 Demo Add Bands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#remove-bands">12 Remove Bands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#stack-images">13 Stack Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#deal-with-bounding-boxes">14 Deal With Bounding Boxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#extract-from-shp">15 Extract From Shp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#ex-compute-ndvi">16 Ex Compute Ndvi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#demo-adapt-bands-with-ot">17 Demo Adapt Bands With Ot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#ex-kmeans">18 Ex Kmeans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#fusion-dempster-shafer-2hypotheses">19 Fusion Dempster Shafer 2Hypotheses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../my_html_gallery.html#prepare-snippets-data-for-traininh">20 Prepare Snippets Data For Traininh</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Classes of rastereasy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules.html#rastereasy.Geoimage"><code class="docutils literal notranslate"><span class="pre">Geoimage</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.__init__"><code class="docutils literal notranslate"><span class="pre">Geoimage.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.where"><code class="docutils literal notranslate"><span class="pre">Geoimage.where()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.update_from"><code class="docutils literal notranslate"><span class="pre">Geoimage.update_from()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.reset_names"><code class="docutils literal notranslate"><span class="pre">Geoimage.reset_names()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.change_nodata"><code class="docutils literal notranslate"><span class="pre">Geoimage.change_nodata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.change_names"><code class="docutils literal notranslate"><span class="pre">Geoimage.change_names()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.activate_history"><code class="docutils literal notranslate"><span class="pre">Geoimage.activate_history()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.deactivate_history"><code class="docutils literal notranslate"><span class="pre">Geoimage.deactivate_history()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.copy"><code class="docutils literal notranslate"><span class="pre">Geoimage.copy()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.info"><code class="docutils literal notranslate"><span class="pre">Geoimage.info()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_type"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_type()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_spatial_resolution"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_spatial_resolution()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_latlon_coordinates"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_latlon_coordinates()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_size"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_nb_bands"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_nb_bands()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_meta"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_meta()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_nodata"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_nodata()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_bounds"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_bounds()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_names"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_names()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.get_georef"><code class="docutils literal notranslate"><span class="pre">Geoimage.get_georef()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.unique"><code class="docutils literal notranslate"><span class="pre">Geoimage.unique()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.abs"><code class="docutils literal notranslate"><span class="pre">Geoimage.abs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.sum"><code class="docutils literal notranslate"><span class="pre">Geoimage.sum()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.min"><code class="docutils literal notranslate"><span class="pre">Geoimage.min()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.max"><code class="docutils literal notranslate"><span class="pre">Geoimage.max()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.mean"><code class="docutils literal notranslate"><span class="pre">Geoimage.mean()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.std"><code class="docutils literal notranslate"><span class="pre">Geoimage.std()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.median"><code class="docutils literal notranslate"><span class="pre">Geoimage.median()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.replace_values"><code class="docutils literal notranslate"><span class="pre">Geoimage.replace_values()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.percentage_pixels"><code class="docutils literal notranslate"><span class="pre">Geoimage.percentage_pixels()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.hist"><code class="docutils literal notranslate"><span class="pre">Geoimage.hist()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.colorcomp"><code class="docutils literal notranslate"><span class="pre">Geoimage.colorcomp()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.convert_3bands"><code class="docutils literal notranslate"><span class="pre">Geoimage.convert_3bands()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.plot_spectra"><code class="docutils literal notranslate"><span class="pre">Geoimage.plot_spectra()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.visu"><code class="docutils literal notranslate"><span class="pre">Geoimage.visu()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.numpy_channel_first"><code class="docutils literal notranslate"><span class="pre">Geoimage.numpy_channel_first()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.numpy_channel_last"><code class="docutils literal notranslate"><span class="pre">Geoimage.numpy_channel_last()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.numpy_table"><code class="docutils literal notranslate"><span class="pre">Geoimage.numpy_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.image_from_table"><code class="docutils literal notranslate"><span class="pre">Geoimage.image_from_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.upload_table"><code class="docutils literal notranslate"><span class="pre">Geoimage.upload_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.upload_image"><code class="docutils literal notranslate"><span class="pre">Geoimage.upload_image()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.astype"><code class="docutils literal notranslate"><span class="pre">Geoimage.astype()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.reproject"><code class="docutils literal notranslate"><span class="pre">Geoimage.reproject()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.latlon2pixel"><code class="docutils literal notranslate"><span class="pre">Geoimage.latlon2pixel()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.pixel2latlon"><code class="docutils literal notranslate"><span class="pre">Geoimage.pixel2latlon()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.save"><code class="docutils literal notranslate"><span class="pre">Geoimage.save()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.extract_from_shapefile"><code class="docutils literal notranslate"><span class="pre">Geoimage.extract_from_shapefile()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.extract_from_shapeimage"><code class="docutils literal notranslate"><span class="pre">Geoimage.extract_from_shapeimage()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.kmeans"><code class="docutils literal notranslate"><span class="pre">Geoimage.kmeans()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.apply_ML_model"><code class="docutils literal notranslate"><span class="pre">Geoimage.apply_ML_model()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.adapt"><code class="docutils literal notranslate"><span class="pre">Geoimage.adapt()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.fuse_dempster_shafer_2"><code class="docutils literal notranslate"><span class="pre">Geoimage.fuse_dempster_shafer_2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.standardize"><code class="docutils literal notranslate"><span class="pre">Geoimage.standardize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.inverse_standardize"><code class="docutils literal notranslate"><span class="pre">Geoimage.inverse_standardize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.resampling"><code class="docutils literal notranslate"><span class="pre">Geoimage.resampling()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.crop"><code class="docutils literal notranslate"><span class="pre">Geoimage.crop()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.select_bands"><code class="docutils literal notranslate"><span class="pre">Geoimage.select_bands()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.stack"><code class="docutils literal notranslate"><span class="pre">Geoimage.stack()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.remove_bands"><code class="docutils literal notranslate"><span class="pre">Geoimage.remove_bands()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.reorder_bands"><code class="docutils literal notranslate"><span class="pre">Geoimage.reorder_bands()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.switch_band"><code class="docutils literal notranslate"><span class="pre">Geoimage.switch_band()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Geoimage.add_band"><code class="docutils literal notranslate"><span class="pre">Geoimage.add_band()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html#rastereasy.shpfiles"><code class="docutils literal notranslate"><span class="pre">shpfiles</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.shpfiles.get_shapefile_attributes"><code class="docutils literal notranslate"><span class="pre">shpfiles.get_shapefile_attributes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.shpfiles.shp2geoim"><code class="docutils literal notranslate"><span class="pre">shpfiles.shp2geoim()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.shpfiles.shp2raster"><code class="docutils literal notranslate"><span class="pre">shpfiles.shp2raster()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html#rastereasy.InferenceTools"><code class="docutils literal notranslate"><span class="pre">InferenceTools</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.InferenceTools.kmeans"><code class="docutils literal notranslate"><span class="pre">InferenceTools.kmeans()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.InferenceTools.fuse_dempster_shafer_2hypotheses"><code class="docutils literal notranslate"><span class="pre">InferenceTools.fuse_dempster_shafer_2hypotheses()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.InferenceTools.adapt"><code class="docutils literal notranslate"><span class="pre">InferenceTools.adapt()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html#rastereasy.rasters"><code class="docutils literal notranslate"><span class="pre">rasters</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.rasters.stack"><code class="docutils literal notranslate"><span class="pre">rasters.stack()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.rasters.remove_bands"><code class="docutils literal notranslate"><span class="pre">rasters.remove_bands()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modules.html#rastereasy.Visualizer"><code class="docutils literal notranslate"><span class="pre">Visualizer</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules.html#rastereasy.Visualizer.plot_spectra"><code class="docutils literal notranslate"><span class="pre">Visualizer.plot_spectra()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">rastereasy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Adapting spectral bands with optimal transport</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/17_demo_adapt_bands_with_ot.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">rastereasy</span>
</pre></div>
</div>
</div>
</div>
<section id="adapting-spectral-bands-with-optimal-transport">
<h1>Adapting spectral bands with optimal transport<a class="headerlink" href="#adapting-spectral-bands-with-optimal-transport" title="Link to this heading"></a></h1>
<p>Read images, info and plot them</p>
<p>Here, for the example, <code class="docutils literal notranslate"><span class="pre">image1</span></code> and <code class="docutils literal notranslate"><span class="pre">image2</span></code> are obtained by <code class="docutils literal notranslate"><span class="pre">asyraster.files2stack</span></code> but they can simply be obtained by
<code class="docutils literal notranslate"><span class="pre">image1=rastereasy.Geoimage(name1)</span></code> and <code class="docutils literal notranslate"><span class="pre">image2=rastereasy.Geoimage(name2)</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">=</span><span class="n">rastereasy</span><span class="o">.</span><span class="n">files2stack</span><span class="p">(</span><span class="s1">&#39;./data/demo/sentinel/copacabana_ipanema_synthesis/202406/&#39;</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;tif&#39;</span><span class="p">)</span>
<span class="n">image2</span><span class="o">=</span><span class="n">rastereasy</span><span class="o">.</span><span class="n">files2stack</span><span class="p">(</span><span class="s1">&#39;./data/demo/sentinel/finistere_synthesis/202405/&#39;</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;tif&#39;</span><span class="p">)</span>
<span class="n">image1</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
<span class="n">image2</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>- Size of the image:
   - Rows (height): 369
   - Cols (width): 467
   - Bands: 12
- Spatial resolution: 10.0  meters / degree (depending on projection system)
- Central point latitude - longitude coordinates: (-22.97848940, -43.19246031)
- Driver: GTiff
- Data type: int16
- Projection system: EPSG:32723
- Nodata: -32768.0

- Given names for spectral bands: 
   {&#39;B01&#39;: 1, &#39;B02&#39;: 2, &#39;B03&#39;: 3, &#39;B04&#39;: 4, &#39;B05&#39;: 5, &#39;B06&#39;: 6, &#39;B07&#39;: 7, &#39;B08&#39;: 8, &#39;B09&#39;: 9, &#39;B11&#39;: 10, &#39;B12&#39;: 11, &#39;B8A&#39;: 12}


- Size of the image:
   - Rows (height): 903
   - Cols (width): 867
   - Bands: 12
- Spatial resolution: 10.0  meters / degree (depending on projection system)
- Central point latitude - longitude coordinates: (48.30106114, -3.78200251)
- Driver: GTiff
- Data type: int16
- Projection system: EPSG:32630
- Nodata: -32768.0

- Given names for spectral bands: 
   {&#39;B01&#39;: 1, &#39;B02&#39;: 2, &#39;B03&#39;: 3, &#39;B04&#39;: 4, &#39;B05&#39;: 5, &#39;B06&#39;: 6, &#39;B07&#39;: 7, &#39;B08&#39;: 8, &#39;B09&#39;: 9, &#39;B11&#39;: 10, &#39;B12&#39;: 11, &#39;B8A&#39;: 12}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">])</span>
<span class="n">image2</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/dee18237d64165f9ff8aef0ddaf1adc1d259189b4020095d56e2f9edd44ba233.png" src="../_images/dee18237d64165f9ff8aef0ddaf1adc1d259189b4020095d56e2f9edd44ba233.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/9f1cbdab1c2ced67b17615bfd19d9938bc3c0dc743e8e759b5736e4cb00448cd.png" src="../_images/9f1cbdab1c2ced67b17615bfd19d9938bc3c0dc743e8e759b5736e4cb00448cd.png" />
</div>
</div>
<p>Domain adaptation. Two possibilities :</p>
<ol class="arabic simple">
<li><p>return an adapted image (<code class="docutils literal notranslate"><span class="pre">image1.adapt</span></code> function)</p></li>
<li><p>directly modify the image (<code class="docutils literal notranslate"><span class="pre">image1.adapt</span></code> function with <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> option)</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">image1</span><span class="o">.</span><span class="n">adapt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Help on method adapt in module rastereasy.rastereasy:

adapt(
    imt,
    tab_source=None,
    nb=1000,
    mapping=&#39;gaussian&#39;,
    reg_e=0.1,
    mu=1.0,
    eta=0.01,
    bias=False,
    max_iter=20,
    verbose=True,
    sigma=1,
    inplace=False
) method of rastereasy.rastereasy.Geoimage instance
    Adjust spectral characteristics to match a target image (in-place).

    This method adapts the spectral characteristics of the current image to match
    those of a target image using optimal transport methods. This is useful for
    harmonizing images from different sensors or acquisitions.

    Parameters
    ----------
    imt : Geoimage or numpy.ndarray
        Target image serving as a reference for spectral adjustment,
        or a NumPy array of shape (N, bands) containing N spectral samples.
    tab_source : numpy.ndarray, optional
        Required if `imt` is a NumPy array. Must be an array of shape (M, bands)
        containing spectral samples from the source image.
    nb : int, optional
        Number of random samples used to train the transport model.
        Default is 1000.
    mapping : str, optional
        Optimal transport method to use:
        - &#39;emd&#39;: Earth Mover&#39;s Distance (simplest)
        - &#39;sinkhorn&#39;: Sinkhorn transport with regularization (balanced)
        - &#39;mappingtransport&#39;: Mapping-based transport (flexible)
        - &#39;gaussian&#39;: Transport with Gaussian assumptions (default, robust)
        Default is &#39;gaussian&#39;.
    reg_e : float, optional
        Regularization parameter for Sinkhorn transport.
        Default is 1e-1.
    mu : float, optional
        Regularization parameter for mapping-based methods.
        Default is 1e0.
    eta : float, optional
        Learning rate for mapping-based transport methods.
        Default is 1e-2.
    bias : bool, optional
        Whether to add a bias term to the transport model.
        Default is False.
    max_iter : int, optional
        Maximum number of iterations for iterative transport methods.
        Default is 20.
    verbose : bool, optional
        Whether to display progress information.
        Default is True.
    sigma : float, optional
        Standard deviation used for Gaussian transport methods.
        Default is 1.
    inplace : bool, default False
        If False, return a copy. Otherwise, do the adaptation in place and return None.

    Returns
    -------
        The image with adapted spectral characteristics

    Examples
    --------
    &gt;&gt;&gt; # Basic spectral adaptation
    &gt;&gt;&gt; image_adapt = image1.adapt(image2)
    &gt;&gt;&gt; image_adapt.visu()  # Now spectrally similar to image2
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Use specific transport method
    &gt;&gt;&gt; image_adapt = image1.adapt(image2, mapping=&#39;sinkhorn&#39;, reg_e=0.01)
    &gt;&gt;&gt; image_adapt.save(&quot;adapted_image.tif&quot;)
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Adaptation using sample arrays
    &gt;&gt;&gt; adapted_image = image1.adapt(tab_target, tab_source = tab_source, mapping=&#39;sinkhorn&#39;, reg_e=0.01)
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Basic spectral adaptation and modify inplace the image
    &gt;&gt;&gt; image1.adapt(image2, inplace=True)
    &gt;&gt;&gt; image1.visu()  # Now spectrally similar to image2

    Notes
    -----
    - This method is useful for:
        - Harmonizing multi-sensor data
        - Matching images acquired under different conditions
        - Preparing time-series data for consistent analysis
    - Different mapping methods have different characteristics:
        - &#39;emd&#39;: Most accurate but slowest
        - &#39;sinkhorn&#39;: Good balance between accuracy and speed
        - &#39;mappingtransport&#39;: Flexible and can handle complex transformations
        - &#39;gaussian&#39;: Fastest and works well for most cases
</pre></div>
</div>
</div>
</div>
</section>
<section id="adaptation">
<h1>1) Adaptation<a class="headerlink" href="#adaptation" title="Link to this heading"></a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1_adapted</span> <span class="o">=</span> <span class="n">image1</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">image2</span><span class="p">,</span><span class="n">mapping</span><span class="o">=</span><span class="s1">&#39;sinkhorn&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fitting transport model using sinkhorn method...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/corpetti/miniforge3/envs/test_re/lib/python3.13/site-packages/ot/backend.py:1165: RuntimeWarning: overflow encountered in exp
  return np.exp(a)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Transforming data...
Adaptation complete.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">],</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;image 1&#39;</span><span class="p">)</span>
<span class="n">image2</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">],</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;image 2&#39;</span><span class="p">)</span>
<span class="n">image1_adapted</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">],</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;image 1 adapted to image 2&#39;</span><span class="p">)</span>
<span class="n">image1_adapted</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;adapt.tif&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="n">image1_adapted</span><span class="o">-</span><span class="n">image1</span><span class="p">)</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/e9853ddfa65509dca13ed0f21ad4952c27d3d6720b7396c53340a720316021a4.png" src="../_images/e9853ddfa65509dca13ed0f21ad4952c27d3d6720b7396c53340a720316021a4.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/d2c5dee84a5305ff86fb63819700420cde27ef4b74d9568c34d95fef780259b8.png" src="../_images/d2c5dee84a5305ff86fb63819700420cde27ef4b74d9568c34d95fef780259b8.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/7093579928e82675f1b4dc0e52124823dd7cc085f0d1b528671d2b9a237d92fb.png" src="../_images/7093579928e82675f1b4dc0e52124823dd7cc085f0d1b528671d2b9a237d92fb.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>np.float64(2544994442.9184103)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 1&#39;</span><span class="p">)</span>
<span class="n">image2</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 2&#39;</span><span class="p">)</span>
<span class="n">image1_adapted</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 1 adapted to image 2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/c028d12bae3c8fdcfd27dc3cc3eac041b4158a76460738bf4ffea14874957bdf.png" src="../_images/c028d12bae3c8fdcfd27dc3cc3eac041b4158a76460738bf4ffea14874957bdf.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/8fb7ae6466447828153f6f8bf505cf6abbbf058bbaae1f6d8e5097169babb911.png" src="../_images/8fb7ae6466447828153f6f8bf505cf6abbbf058bbaae1f6d8e5097169babb911.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/1d365897f0fbe93c15bee5d2c4c76a6cc310573d8964e5bdb5721037adcb51fc.png" src="../_images/1d365897f0fbe93c15bee5d2c4c76a6cc310573d8964e5bdb5721037adcb51fc.png" />
</div>
</div>
</section>
<section id="by-modifying-the-image-directly-inplace-true-option">
<h1>2) By modifying the image directly <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> option<a class="headerlink" href="#by-modifying-the-image-directly-inplace-true-option" title="Link to this heading"></a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">],</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;image 1 before adaptation&#39;</span><span class="p">)</span>
<span class="n">image1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 1 before adaptation&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/128f0709c24d23113bf547af72a8b97a6d52d93c8bebc24a07842b9d6eb9c9ae.png" src="../_images/128f0709c24d23113bf547af72a8b97a6d52d93c8bebc24a07842b9d6eb9c9ae.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/62bdd8da3565b29df975de83108dfd9b0088567b78ff8d4e8f10252ef93f344c.png" src="../_images/62bdd8da3565b29df975de83108dfd9b0088567b78ff8d4e8f10252ef93f344c.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">image2</span><span class="p">,</span><span class="n">mapping</span><span class="o">=</span><span class="s1">&#39;sinkhorn&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fitting transport model using sinkhorn method...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/corpetti/miniforge3/envs/test_re/lib/python3.13/site-packages/ot/backend.py:1165: RuntimeWarning: overflow encountered in exp
  return np.exp(a)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Transforming data...
Adaptation complete.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">([</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">],</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;image 1 after adaptation&#39;</span><span class="p">)</span>
<span class="n">image1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 1 after adaptation&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/10026f5edcc9a5aa4892f17b27180da020fa1343e36cfcb57220a4ac90a9322d.png" src="../_images/10026f5edcc9a5aa4892f17b27180da020fa1343e36cfcb57220a4ac90a9322d.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/d8f7c46da947663d0d602f1aa049c64992f00c4a3b9fa3ec906dda403b60a8f4.png" src="../_images/d8f7c46da947663d0d602f1aa049c64992f00c4a3b9fa3ec906dda403b60a8f4.png" />
</div>
</div>
</section>
<section id="by-manually-selecting-the-samples">
<h1>2) By manually selecting the samples<a class="headerlink" href="#by-manually-selecting-the-samples" title="Link to this heading"></a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1</span><span class="o">=</span><span class="n">rastereasy</span><span class="o">.</span><span class="n">files2stack</span><span class="p">(</span><span class="s1">&#39;./data/demo/sentinel/copacabana_ipanema_synthesis/202406/&#39;</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;tif&#39;</span><span class="p">)</span>
<span class="n">image2</span><span class="o">=</span><span class="n">rastereasy</span><span class="o">.</span><span class="n">files2stack</span><span class="p">(</span><span class="s1">&#39;./data/demo/sentinel/finistere_synthesis/202405/&#39;</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">ext</span><span class="o">=</span><span class="s1">&#39;tif&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">samples_source</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="o">=</span><span class="n">image1</span><span class="o">.</span><span class="n">plot_spectra</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8599cf346b384fbca901af62cb1ed7ac", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "b0c875cdabae41b5b3e3dcd21b573939", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">samples_target</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="o">=</span><span class="n">image2</span><span class="o">.</span><span class="n">plot_spectra</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "590c13cd581443e5b8f52de57ed69f8a", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "c04951c53a7e44eab4a904df879b98eb", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;size of sample source = &#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">samples_source</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;size of sample target = &#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">samples_target</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>size of sample source =  54
size of sample target =  44
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1_adapted</span> <span class="o">=</span> <span class="n">image1</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">samples_target</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">samples_source</span><span class="p">),</span><span class="n">mapping</span><span class="o">=</span><span class="s1">&#39;sinkhorn&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Fitting transport model using sinkhorn method...
Transforming data...
Adaptation complete.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/corpetti/miniforge3/envs/test_re/lib/python3.13/site-packages/ot/da.py:1366: RuntimeWarning: invalid value encountered in divide
  transp_Xs_ = nx.dot(K, self.xt_) / nx.sum(K, axis=1)[:, None]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1_adapted</span><span class="o">.</span><span class="n">colorcomp</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/corpetti/miniforge3/envs/test_re/lib/python3.13/site-packages/rastereasy/utils.py:225: RuntimeWarning: invalid value encountered in cast
  return (255.*np.clip((band.astype(np.float64)-min)/(max-min).astype(np.float64),0.,1.)).astype(np.uint8)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/881fd0e6b73b00affa7b0d16729eb6b8b838678aeae58a8e6633e1a6cf89625a.png" src="../_images/881fd0e6b73b00affa7b0d16729eb6b8b838678aeae58a8e6633e1a6cf89625a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image2</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 1 after adaptation&#39;</span><span class="p">)</span>
<span class="n">image1_adapted</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">superpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;hist image 1 after adaptation&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/67e4620d874d562aff3b069e0716682d7f9f08ca411dd05f16e20abe45109201.png" src="../_images/67e4620d874d562aff3b069e0716682d7f9f08ca411dd05f16e20abe45109201.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../_images/5917d294e93f4f69b50a5513b87926865d71d1d490ecc1a3ab98041965c946f5.png" src="../_images/5917d294e93f4f69b50a5513b87926865d71d1d490ecc1a3ab98041965c946f5.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image1_adapted</span><span class="o">.</span><span class="n">plot_spectra</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "0bdb2d36c2ba48628da1d0dee1c3176c", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "76508154cc5045f889070eb0b45c23e1", "version_major": 2, "version_minor": 0}</script><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>([], [], [])
</pre></div>
</div>
</div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Thomas Corpetti.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>